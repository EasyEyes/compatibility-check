<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Compatibility Check Endpoint</title>
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <script type="module" src="main.js"></script>

    <!-- The rest of your head content -->
    <meta
      http-equiv="Delegate-CH"
      content="sec-ch-ua-full-version-list https://cloud.51degrees.com; 
               sec-ch-ua-model https://cloud.51degrees.com; 
               sec-ch-ua-platform https://cloud.51degrees.com; 
               sec-ch-ua-platform-version https://cloud.51degrees.com"
    />
  </head>

  <body></body>

  <!-- 51Degrees script (make sure it is supported on iOS 11 or polyfilled) -->
  <script
    crossorigin
    src="https://cloud.51degrees.com/api/v4/AQSjtocC5XcfFwKc20g.js"
  ></script>

  <script>
    (async function () {
      console.log(
        `
        Welcome to the compatibility check endpoint.
        This page will be accessed from the participant's phone, by way of scanning
        a QR code from the experiment Needs page.
        `
      );

      try {
        const pp = new EasyEyesPeer.PhonePeer({
          onError: (err) => {
            console.log(err);
            alert(
              "An error occurred. Please press the button below to refresh."
            );
            location.reload();
          },
        });

        await pp.init();
        console.log("!. ~ file: index.html:24 ~ pp:", pp);
      } catch (error) {
        console.error("Failed to initialize PhonePeer:", error);
      }
    })();
  </script>
</html>
